<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jack Emmerson – Designing Tomorrow</title>

  <!-- Visibility hot-fix (prevents any old CSS/JS from leaving opacity:0) -->
  <style id="hotfix-visible">html,body{opacity:1!important;background:#0f172a!important}</style>
  <script>
    (()=>{const f=()=>{document.documentElement.style.opacity='1';document.body.style.opacity='1'};document.addEventListener('DOMContentLoaded',f,{once:true});addEventListener('click',e=>{if(e.target?.closest?.('a'))f()},true)})();
  </script>

  <style>
    :root { --bg1:#0f172a; --bg2:#020617; --ink:#e2e8f0; --muted:#94a3b8; }
    * { box-sizing: border-box }
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      background: radial-gradient(1200px 800px at 50% 40%, var(--bg1), var(--bg2));
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji",sans-serif;
    }

    /* Layout */
    .nav{position:fixed; inset-inline:0; top:0; z-index:20;}
    .nav .row{max-width:1100px; margin:0 auto; padding:20px 24px; display:flex; align-items:center; justify-content:space-between;}
    .nav a{color:#cbd5e1; text-decoration:none; margin-left:24px}
    .nav a:hover{color:#6ee7b7}
    .brand{display:inline-block; width:28px; height:28px; border-radius:10px; background:#10b981; margin-right:10px; vertical-align:middle}

    .hero{min-height:100vh; display:grid; place-items:center; padding:96px 24px 24px; position:relative; z-index:10;}
    .hero .card{text-align:center; max-width:820px; transform:translateY(-10vh)}
    .h1{
      font-weight:800; font-size:clamp(44px,8vw,84px); line-height:1.05; margin:0;
      background:linear-gradient(90deg,#A7F3D0,#CCFBF1,#67E8F9);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      letter-spacing:.5px;
    }
    .sub{margin-top:18px; color:var(--muted); font-size:18px}
    .btns{margin-top:28px; display:flex; gap:14px; justify-content:center}
    .pill{padding:12px 28px; border-radius:9999px; border:1px solid rgba(255,255,255,.15); backdrop-filter:saturate(180%) blur(6px)}
    .pill.primary{background:rgba(16,185,129,.18); color:#6ee7b7; border-color:rgba(16,185,129,.30)}
    .pill.primary:hover{background:rgba(16,185,129,.28)}
    .pill.ghost{background:rgba(255,255,255,.08); color:#e5e7eb}
    .pill.ghost:hover{background:rgba(255,255,255,.16)}

    /* Effect layers */
    vortex-orbits{position:fixed; inset:0; z-index:0; pointer-events:none; display:block}
    .scanlines{position:fixed; inset:0; z-index:1; pointer-events:none;
      background-image:repeating-linear-gradient(to bottom, rgba(255,255,255,.03) 0, rgba(255,255,255,.03) 1px, transparent 1px, transparent 3px);
    }

    footer{position:relative; z-index:10; text-align:center; color:#94a3b8; font-size:14px; padding:24px 0}

    /* Small HUD (you can delete later) */
    .hud{position:fixed; left:8px; top:8px; z-index:50; background:rgba(2,6,23,.65); color:#cbd5e1;
         padding:6px 10px; border-radius:6px; font:12px ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace}
  </style>
</head>
<body>
  <!-- Background effect -->
  <vortex-orbits></vortex-orbits>
  <div class="scanlines"></div>

  <!-- NAV -->
  <header class="nav">
    <div class="row">
      <div><span class="brand"></span><strong>Jack Emmerson</strong></div>
      <div>
        <a href="index.html">Jack</a>
        <a href="tools.html">Tools</a>
        <a href="shop.html">Shop</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main class="hero">
    <section class="card">
      <h1 class="h1">Designing&nbsp;Tomorrow</h1>
      <p class="sub">Aerospace engineering, CFD wizardry &amp; orbital mechanics — built in public.</p>
      <div class="btns">
        <a class="pill primary" href="tools.html">Explore Tools</a>
        <a class="pill ghost" href="mailto:sidwellcourtney@gmail.com">Contact</a>
      </div>
    </section>
  </main>

  <footer>© 2025 Jack Emmerson</footer>
  <div id="hud" class="hud">booting…</div>

  <!-- EFFECT: intro right-slide → static grid with planet-disc reveal (inline-orbits-r21) -->
  <script>
  (function(){
    // Planet data (AU, sidereal period days). Only Mercury..Jupiter so Jupiter is outermost.
    const PLANETS = [
      {name:"Mercury", a:0.3871, P:  87.969, color:"#cbd5e1", r:2, disc:22},
      {name:"Venus",   a:0.7233, P: 224.701, color:"#fbbf24", r:3, disc:26},
      {name:"Earth",   a:1.0000, P: 365.256, color:"#60a5fa", r:3, disc:28},
      {name:"Mars",    a:1.5237, P: 686.980, color:"#f87171", r:3, disc:26},
      {name:"Jupiter", a:5.2026, P:4332.590, color:"#f59e0b", r:4, disc:34}
    ];

    // Tuning knobs (feel free to tweak)
    const INTRO_SECS = 3.0;             // readable intro duration (seconds)
    const SLIDE_PX_PER_SEC = 28;        // uniform rightward slide speed (px/s)
    const MORPH_MS = 900;               // intro → static morph duration (ms)
    const DAYS_PER_SEC = 30;            // solar-system time scale (Earth orbits in ~12s)
    const CELL_W = 12, CELL_H = 36;     // monospace grid cell
    const ROWS = 40;                    // vertical grid rows
    const CENTER_X = 0.5, CENTER_Y = 0.58;

    // Helpers
    const clamp01 = x => Math.max(0, Math.min(1, x));
    const easeCubic = t => (t<.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2);

    class VortexOrbits extends HTMLElement {
      connectedCallback() {
        this.words = ["TRAJECTORY","PROPULSION","Δv","CFD","REENTRY","ORBITAL","STARSHIP","MARS","SPICE","ROVER","SCRAMJET","UAV"];
        this.line = (this.words.join("•")+"•").replace(/ /g,"");

        // Canvas
        this.c = document.createElement('canvas');
        this.ctx = this.c.getContext('2d', {alpha:true});
        this.appendChild(this.c);

        // Size & precompute
        const resize = () => {
          const dpr = Math.max(1, devicePixelRatio||1);
          this.c.width  = Math.floor(innerWidth*dpr);
          this.c.height = Math.floor(innerHeight*dpr);
          this.c.style.width  = innerWidth + "px";
          this.c.style.height = innerHeight + "px";
          this.ctx.setTransform(dpr,0,0,dpr,0,0);

          // Center
          this.cx = innerWidth*CENTER_X;
          this.cy = innerHeight*CENTER_Y;

          // Font + cell
          this.fontPx = Math.max(10, Math.floor(CELL_H*0.61));
          this.ctx.font = `${this.fontPx}px "Courier New", monospace`;
          const mw = Math.ceil(this.ctx.measureText("M").width) + 2;
          this.cellW = Math.max(CELL_W, mw);
          this.cellH = CELL_H;

          // Grid
          this.cols = Math.max(1, Math.floor(innerWidth / this.cellW));
          this.rows = Math.max(1, ROWS);
          this.N    = Math.min(this.cols * this.rows, 12000);

          // Map glyphs to fixed row/col (row-major)
          this.rcRow = new Int16Array(this.N);
          this.rcCol = new Int16Array(this.N);
          let k=0;
          for (let r=0;r<this.rows && k<this.N;r++){
            for (let c=0;c<this.cols && k<this.N;c++,k++){
              this.rcRow[k]=r; this.rcCol[k]=c;
            }
          }

          // Static base positions (no vertical drift ever)
          this.yBaseOffset = this.cy - (this.rows*this.cellH)/2;

          // Orbit scale so Jupiter ≈ 45% of min dimension
          const minDim = Math.min(innerWidth, innerHeight);
          const kpx = (0.45 * minDim) / 5.2026; // Jupiter a=5.2026 AU
          this.orbitR = PLANETS.map(p => p.a * kpx);

          // Planet phases from current date, and angular rates
          const daysNow = Date.now()/86400000;
          this.ang0 = PLANETS.map(p => 2*Math.PI * ((daysNow % p.P) / p.P));
          this.omega = PLANETS.map(p => 2*Math.PI * (DAYS_PER_SEC / p.P));
        };
        addEventListener('resize', resize, {passive:true});
        resize();

        // Timeline
        this.t0 = performance.now();
        this.tick = this.tick.bind(this);
        requestAnimationFrame(this.tick);
      }

      tick(now){
        const ctx = this.ctx;
        const width = innerWidth, height = innerHeight;
        ctx.clearRect(0,0,width,height);
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillStyle = "#d7e0ee";
        ctx.font = `${this.fontPx}px "Courier New", monospace`;

        const introMs = INTRO_SECS*1000;
        const tIntro  = clamp01((now - this.t0)/introMs);      // 0..1 during intro
        const afterIntro = Math.max(0, now - (this.t0 + introMs));
        const morph = easeCubic(clamp01(afterIntro / MORPH_MS)); // 0..1 morph to static

        // Planet positions (move continuously)
        const tSec = (now - this.t0)/1000;
        const px = []; const py = [];
        for (let k=0;k<this.orbitR.length;k++){
          const a = this.ang0[k] + this.omega[k]*tSec;
          px[k] = this.cx + this.orbitR[k]*Math.cos(a);
          py[k] = this.cy + this.orbitR[k]*Math.sin(a);
        }

        // --- Draw letters ---
        // Intro: every row slides right at the same speed (no wrapping, no vertical motion).
        // Morph: slide offset eases back to 0; final grid is static.
        const slideOffset = SLIDE_PX_PER_SEC * (tIntro * INTRO_SECS); // pixels
        const slideNow = slideOffset * (1 - morph); // eases to zero through morph

        // When static, letters freeze and only show inside planet discs.
        const revealOnly = (morph >= 1);

        const chStatic = i => this.line.charAt(i % this.line.length) || "•";
        const chIntro  = chStatic; // keep characters steady for readability

        for (let i=0;i<this.N;i++){
          const r = this.rcRow[i], c = this.rcCol[i];
          const baseX = (c + 0.5) * this.cellW;
          const baseY = (r + 0.5) * this.cellH + this.yBaseOffset;

          // Strictly horizontal motion only
          const x = baseX + slideNow;
          const y = baseY;

          if (!revealOnly) {
            const ch = chIntro(i);
            ctx.fillText(ch, x, y);
          } else {
            // Static: reveal only inside planet discs (solid filled circles of text)
            let visible = false;
            for (let k=0;k<this.orbitR.length;k++){
              const dx = x - px[k], dy = y - py[k];
              if (dx*dx + dy*dy <= (PLANETS[k].disc*PLANETS[k].disc)) { visible = true; break; }
            }
            if (visible) {
              const ch = chStatic(i);
              ctx.fillText(ch, x, y);
            }
          }
        }

        // --- Draw planets (solid dots). No orbit-line text keeping; no halos. ---
        ctx.save();
        for (let k=0;k<this.orbitR.length;k++){
          // Optional ultra-faint orbit lines (visual only). Comment out if undesired.
          // ctx.globalAlpha = 0.10;
          // ctx.strokeStyle = "rgba(148,163,184,1)";
          // ctx.lineWidth = 1;
          // ctx.beginPath(); ctx.arc(this.cx, this.cy, this.orbitR[k], 0, Math.PI*2); ctx.stroke();

          // Planet
          ctx.globalAlpha = 1;
          ctx.fillStyle = PLANETS[k].color;
          ctx.beginPath(); ctx.arc(px[k], py[k], PLANETS[k].r, 0, Math.PI*2); ctx.fill();
          // (Letters themselves form the solid disc via the reveal mask.)
        }
        ctx.restore();

        // HUD
        const hud = document.getElementById('hud');
        if (hud) hud.textContent = `inline-orbits-r21 | intro=${tIntro.toFixed(2)} morph=${morph.toFixed(2)} | Jupiter=${Math.round(this.orbitR[4])}px`;

        requestAnimationFrame(this.tick);
      }
    }

    // Register element with a fresh tag to avoid older definitions
    const TAG = 'vortex-orbits';
    if (!customElements.get(TAG)) customElements.define(TAG, VortexOrbits);
  })();
  </script>
</body>
</html>
