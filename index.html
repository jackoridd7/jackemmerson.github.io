<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jack Emmerson – Designing Tomorrow</title>

  <style>
    :root { --bg1:#0f172a; --bg2:#020617; --ink:#e2e8f0; --muted:#94a3b8; }
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      background: radial-gradient(var(--bg1) 20%, var(--bg2) 80%);
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji",sans-serif;
    }
    /* Layout (no external CSS) */
    .nav{position:fixed; inset-inline:0; top:0; z-index:20;}
    .nav .row{max-width:1100px; margin:0 auto; padding:24px; display:flex; align-items:center; justify-content:space-between;}
    .nav a{color:#cbd5e1; text-decoration:none; margin-left:24px}
    .nav a:hover{color:#6ee7b7}
    .hero{min-height:100vh; display:grid; place-items:center; padding:96px 24px 24px; position:relative; z-index:10;}
    .hero .card{text-align:center; max-width:820px; transform:translateY(-12vh)}
    .brand{display:inline-block; width:32px; height:32px; border-radius:12px; background:#10b981; margin-right:12px; vertical-align:middle}
    .h1{
      font-weight:800; font-size:clamp(44px,8vw,84px); line-height:1.05; margin:0;
      background:linear-gradient(90deg,#A7F3D0,#CCFBF1,#67E8F9);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .sub{margin-top:18px; color:var(--muted); font-size:18px}
    .btns{margin-top:28px; display:flex; gap:14px; justify-content:center}
    .pill{padding:12px 28px; border-radius:9999px; border:1px solid rgba(255,255,255,.15); backdrop-filter:saturate(180%) blur(6px)}
    .pill.primary{background:rgba(16,185,129,.18); color:#6ee7b7; border-color:rgba(16,185,129,.30)}
    .pill.primary:hover{background:rgba(16,185,129,.28)}
    .pill.ghost{background:rgba(255,255,255,.08); color:#e5e7eb}
    .pill.ghost:hover{background:rgba(255,255,255,.16)}

    /* Effect layers */
    vortex-ultraslow{position:fixed; inset:0; z-index:0; pointer-events:none; display:block}
    .scanlines{position:fixed; inset:0; z-index:1; pointer-events:none;
      background-image:repeating-linear-gradient(to bottom, rgba(255,255,255,.03) 0, rgba(255,255,255,.03) 1px, transparent 1px, transparent 3px);
    }

    /* Tiny HUD (can be removed later) */
    .hud{position:fixed; left:8px; top:8px; z-index:50; background:rgba(2,6,23,.65); color:#cbd5e1;
         padding:6px 10px; border-radius:6px; font:12px ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace}
  </style>
</head>
<body>
  <!-- Background effect -->
  <vortex-ultraslow></vortex-ultraslow>
  <div class="scanlines"></div>

  <!-- NAV -->
  <header class="nav">
    <div class="row">
      <div><span class="brand"></span><strong>Jack Emmerson</strong></div>
      <div>
        <a href="index.html">Jack</a>
        <a href="tools.html">Tools</a>
        <a href="shop.html">Shop</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main class="hero">
    <section class="card">
      <h1 class="h1">Designing&nbsp;Tomorrow</h1>
      <p class="sub">Aerospace engineering, CFD wizardry &amp; orbital mechanics — built in public.</p>
      <div class="btns">
        <a class="pill primary" href="tools.html">Explore Tools</a>
        <a class="pill ghost" href="mailto:sidwellcourtney@gmail.com">Contact</a>
      </div>
    </section>
  </main>

  <footer style="position:relative; z-index:10; text-align:center; color:#94a3b8; font-size:14px; padding:24px 0">
    © 2025 Jack Emmerson
  </footer>

  <div id="hud" class="hud">booting…</div>

  <!-- INLINE orbit-masked vortex (inline-orbits-r18-full) -->
  <script>
  (function(){
    // ——— helpers
    const hud = (t)=>{ const el=document.getElementById('hud'); if(el) el.textContent=t; };

    class VortexUltraOrbits extends HTMLElement {
      connectedCallback(){
        try {
          // ===== Tunables ====================================================
          this.words = ["TRAJECTORY","PROPULSION","Δv","CFD","REENTRY","ORBITAL","STARSHIP","MARS","SPICE","ROVER","SCRAMJET","UAV"];

          // Spiral/grid
          const CELL_W=12, CELL_H=36;
          const ROWS=40, B=4.2;            // r = B*θ
          const CENTER_X=0.5, CENTER_Y=0.58;
          const BOOT_MS=3000;              // rows phase

          // Motion (faster than r17, still gentle)
          const SPEED_INTRO=0.00004;       // rad/s (soft)
          const SPEED_FINAL=0.0018;        // rad/s (slow)
          const STEP_INTRO_MS=800;         // max one cell hop / ~0.8s
          const STEP_FINAL_MS=600;         // ~0.6s

          // Fade: as morph→1, base letters fade; orbit letters persist
          const FADE_POWER = 1.5;

          // Orbits (auto scaled)
          const ORBIT_COUNT = 5;
          const ORBIT_INNER = 0.12;        // fraction of min(viewport)
          const ORBIT_STEP  = 0.115;
          const ORBIT_BAND  = 14;          // ±px around orbit to keep letters

          // Planet dots
          const PLANET_SPEED_MIN = 0.02, PLANET_SPEED_MAX = 0.06; // base scales
          // ===================================================================

          const line = (this.words.join("•")+"•").replace(/ /g,"");

          const cvs = document.createElement("canvas");
          const ctx = cvs.getContext("2d");
          this.appendChild(cvs);

          const resize = () => {
            const dpr = Math.max(1, devicePixelRatio||1);
            cvs.width  = Math.floor(innerWidth*dpr);
            cvs.height = Math.floor(innerHeight*dpr);
            cvs.style.width  = innerWidth+"px";
            cvs.style.height = innerHeight+"px";
            ctx.setTransform(dpr,0,0,dpr,0,0);

            this.cx = innerWidth*CENTER_X;
            this.cy = innerHeight*CENTER_Y;

            // font & cell sanity
            this.fontPx = Math.max(10, Math.floor(CELL_H*0.61));
            ctx.font = `${this.fontPx}px "Courier New", monospace`;
            const mw = Math.ceil(ctx.measureText("M").width)+2;
            this.cellW = Math.max(CELL_W, mw);
            this.cellH = CELL_H;

            this.cols = Math.max(1, Math.floor(innerWidth / this.cellW));
            this.rows = Math.max(1, ROWS);
            this.N    = Math.min(this.cols*this.rows, 12000);

            const maxR = Math.hypot(Math.max(this.cx, innerWidth-this.cx),
                                    Math.max(this.cy, innerHeight-this.cy)) + 60;
            this.maxTheta = maxR / B;

            // θ inner→outer
            this.theta = new Float32Array(this.N);
            for (let i=0;i<this.N;i++) this.theta[i]=(i/this.N)*this.maxTheta;

            // grid mapping + state
            this.rcRow = new Int16Array(this.N);
            this.rcCol = new Int16Array(this.N);
            this.lastCi= new Int16Array(this.N);
            this.lastRi= new Int16Array(this.N);
            this.nextAt= new Float64Array(this.N);
            let k=0, now=performance.now();
            for (let r=0;r<this.rows && k<this.N;r++){
              for (let c=0;c<this.cols && k<this.N;c++,k++){
                this.rcRow[k]=r; this.rcCol[k]=c;
                this.lastCi[k]=c; this.lastRi[k]=r;
                this.nextAt[k]=now;
              }
            }
            this.occ = new Uint8Array(this.cols*this.rows);

            // orbits
            const minDim = Math.min(innerWidth, innerHeight);
            this.orbits = new Array(ORBIT_COUNT).fill(0).map((_,i)=> (ORBIT_INNER + i*ORBIT_STEP) * minDim);

            // planets
            this.planetA = this.orbits.map(()=> Math.random()*Math.PI*2);
            this.planetV = this.orbits.map(()=> (PLANET_SPEED_MIN + Math.random()*(PLANET_SPEED_MAX-PLANET_SPEED_MIN)) * 0.06);
          };
          addEventListener("resize", resize, {passive:true}); resize();

          const ease = t => t<.5 ? 4*t*t*t : 1-(-2*t+2)**3/2;

          this.__version = "inline-orbits-r18-full";
          let tStart = performance.now(), tPrev = tStart;

          const tick = (now) => {
            const dt = Math.min(1/20, Math.max(0,(now - tPrev)/1000)); tPrev = now;

            ctx.clearRect(0,0,innerWidth,innerHeight);

            // morph + speeds
            const mRaw = Math.min(1, Math.max(0,(now - tStart - BOOT_MS)/1200));
            const morph = ease(mRaw);
            const speedNow = SPEED_INTRO + (SPEED_FINAL - SPEED_INTRO)*morph;
            const stepMs   = STEP_INTRO_MS + (STEP_FINAL_MS - STEP_INTRO_MS)*morph;

            // slow character cycling
            const charOffset = Math.floor(now / 6000) % line.length;

            // faint orbit rings
            ctx.save();
            ctx.strokeStyle = "rgba(148,163,184,0.18)";
            ctx.lineWidth = 1;
            this.orbits.forEach(r=>{
              ctx.beginPath();
              ctx.arc(this.cx, this.cy, r, 0, Math.PI*2);
              ctx.stroke();
            });
            ctx.restore();

            // reset occupancy
            this.occ.fill(0);
            const halfRowsH = (ROWS*this.cellH)/2;

            // letters
            ctx.font = `${this.fontPx}px "Courier New", monospace`;
            ctx.textAlign="center"; ctx.textBaseline="middle";

            for (let i=0;i<this.N;i++){
              let t = this.theta[i];
              if (t > this.maxTheta){ t -= this.maxTheta; this.theta[i]=t; }
              const r = B*t;

              // spiral vs rows positions
              const sx = this.cx + r*Math.cos(t);
              const sy = this.cy + r*Math.sin(t);
              const rx = (this.rcCol[i]+0.5)*this.cellW;
              const ry = (this.rcRow[i]+0.5)*this.cellH + (this.cy - halfRowsH);

              let x = rx*(1-morph) + sx*morph;
              let y = ry*(1-morph) + sy*morph;

              const ciT = Math.round(x / this.cellW);
              const riT = Math.round(y / this.cellH);

              // step one cell at a time, with cooldown
              let ci = this.lastCi[i], ri = this.lastRi[i];
              if ((ciT!==ci || riT!==ri) && now >= this.nextAt[i]) {
                const dci = ciT - ci, dri = riT - ri;
                if (Math.abs(dci) >= Math.abs(dri)) ci += Math.sign(dci)||0;
                else ri += Math.sign(dri)||0;
                ci = Math.max(0, Math.min(this.cols-1, ci));
                ri = Math.max(0, Math.min(this.rows-1, ri));
                this.lastCi[i]=ci; this.lastRi[i]=ri;
                this.nextAt[i]= now + stepMs;
              }

              const key = ri*this.cols + ci;
              if (this.occ[key]) { this.theta[i]=t + speedNow*dt; continue; }
              this.occ[key]=1;

              const px = ci*this.cellW, py = ri*this.cellH;

              // fade: keep letters near any orbit; others fade with morph
              const dist = Math.hypot(px - this.cx, py - this.cy);
              let orbitMask = 0;
              for (let k=0;k<this.orbits.length;k++){
                const d = Math.abs(dist - this.orbits[k]);
                const a = Math.max(0, 1 - d/ORBIT_BAND);
                if (a > orbitMask) orbitMask = a;
              }
              const baseFade = Math.pow(1 - morph, FADE_POWER);
              const alpha = Math.max(orbitMask, baseFade);

              if (alpha > 0.02) {
                ctx.globalAlpha = alpha;
                ctx.fillStyle = "#d7e0ee";
                const ch = line.charAt((i + charOffset) % line.length) || "•";
                ctx.fillText(ch, px, py);
              }

              this.theta[i] = t + speedNow*dt;
            }
            ctx.globalAlpha = 1;

            // planets
            ctx.save();
            ctx.fillStyle = "#93c5fd";
            for (let k=0;k<this.orbits.length;k++){
              this.planetA[k] += this.planetV[k] * dt; // very slow
              const r = this.orbits[k];
              const ax = this.cx + r * Math.cos(this.planetA[k]);
              const ay = this.cy + r * Math.sin(this.planetA[k]);
              ctx.beginPath();
              ctx.arc(ax, ay, 3, 0, Math.PI*2);
              ctx.fill();
            }
            ctx.restore();

            hud(`inline-orbits-r18 | morph=${morph.toFixed(2)} speed=${speedNow.toFixed(5)} rad/s`);
            requestAnimationFrame(tick);
          };
          requestAnimationFrame(tick);
        } catch (e) {
          hud("error: " + (e && e.message || e));
        }
      }
    }
    // Define (or replace) the element
    const TAG = 'vortex-ultraslow';
    if (customElements.get(TAG)) {
      // replace the instance with our new implementation under a fresh tag
      const NewTag = 'vortex-ultraslow2';
      if (!customElements.get(NewTag)) customElements.define(NewTag, VortexUltraOrbits);
      const old = document.querySelector(TAG);
      if (old) old.replaceWith(document.createElement(NewTag));
      hud('replaced old vortex');
    } else {
      customElements.define(TAG, VortexUltraOrbits);
    }
  })();
  </script>
</body>
</html>
